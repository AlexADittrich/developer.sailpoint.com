---
id: powershell-sdk
title: PowerShell SDK
pagination_label: PowerShell SDK
sidebar_label: PowerShell
sidebar_position: 3
sidebar_class_name: powershellsdk
keywords: ['powershell', 'sdk']
description: Learn how to use the PowerShell SDK in this guide.
slug: /tools/sdk/powershell
tags: ['SDK']
---

Read this guide to learn how to use the PowerShell SDK. The PowerShell SDK has some pre-built code examples you can use to learn how to build tools that can interact with IdentityNow.

## Requirements

You need the following to use the PowerShell SDK:

- PowerShell 6.2 or greater. To learn how to install, refer to [Installing PowerShell](https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell?view=powershell-7.4).

- Your tenant name in IdentityNow. To learn how to find it, refer to [Getting Started](/idn/api/getting-started#find-your-tenant-name). The SDK will use this tenant name to connect to your IdentityNow instance.

- A PAT with a client secret and ID. To learn how to create one in IDN, refer to [Personal Access Tokens](https://documentation.sailpoint.com/saas/help/common/api_keys.html#generating-a-personal-access-token). The SDK will use this PAT to authenticate with the SailPoint APIs.

## Setup

<details>
<summary>CLI Assisted <em>(Recommended)</em></summary>

The SailPoint CLI offers a few commands that will allow you to quickly get started with the PowerShell SDK. To learn how to install and use the SailPoint CLI, refer to [SailPoint CLI](https://developer.sailpoint.com/idn/tools/cli#get-the-cli).

Once the CLI is installed and configured, run the following command to create a new PowerShell project with our PowerShell SDK.

```bash
sail sdk init powershell
```

This will create the structure for your project.

```text
|-- powershell-template
|   |-- paginate.ps1
|   |-- paginateAccounts.ps1
|   |-- patchEntitlement.ps1
|   |-- sdk.ps1
|   |-- search.ps1
|   |-- transform.ps1
```

Run the following command to install the required dependencies.

```powershell
Install-Module -Name PSSailpoint
```

This command installs the SailPoint PowerShell SDK module. You will be prompted to confirm that you are sure you want to install the module from 'PSGallery'. Enter "A" to say "Yes to All".

If you already have a version of the PowerShell SDK installed, you can install a new version side-by-side with it by adding the `-Force` parameter to the end of your `Install-Module` commmand:

```powershell
Install-Module -Name PSSailpoint -Force
```

To validate the module is installed, run `Get-Module -ListAvailable PSSailpoint` and verify that the module is listed. Additionally, you can run `Get-Command -Module PSSailpoint` to see the available commands included in the module.

The SDK is now installed. To configure the SDK see [Configure](#configure).

</details>

<details>
    <summary>Manual Installation</summary>

### Manually Install the SDK

If access to the PowerShell Gallery isn't available, you can also install the PowerShell SDK manually. Follow these steps to do so:

:::caution

If you manually install the module on a machine without access to the PowerShell Gallery, you will also need to manually install updates to the SDK.

:::

To manually install the PowerShell module:

1. Download the source code zip from the most recent release on [GitHub](https://github.com/sailpoint-oss/powershell-sdk/releases)
2. Open the ZIP file, then open then folder labeled `powershell-sdk-x.x.x` with the `x.x.x` representing the version you downloaded
3. Extract the `PSSailpoint` module folder inside to one of the following locations:
   - To install for the Current user: `C:\Users\<username>\Documents\WindowsPowerShell\Modules\PSSailpoint`
   - To install for All users (requires Administrator privileges): `C:\Program Files\WindowsPowerShell\Modules\PSSailpoint`
4. Run `Import-Module PSSailpoint` to import the module into the current session.
5. To validate the module is installed, run `Get-Module -ListAvailable PSSailpoint` and verify that the module is listed. Additionally, you can run `Get-Command -Module PSSailpoint` to see the available commands included in the module.

The SDK is now installed. To configure the SDK see [Configure](#configure).

</details>


## Configure

In order for the SDK to authenticate to your SailPoint tenant and make API calls you will need to provide configuration. This can be done through a configuration file `config.json` or through environment variables.

### Configuration File

The SDK requires a configuration file to be named `config.json` and provide the following key/value pairs `ClientID`, `ClientSecret`, `BaseUrl`.

<details>
<summary>CLI Assisted <em>(Recommended)</em></summary>
The SailPoint CLI offers a command to generate the config.json file with your currently configured CLI credentials.

```bash
sail sdk init config
```

If you have multiple environments configured with the CLI you can pass an additional parameter to state the environment you wish to create a `config.json` for.

```bash
sail sdk init config --env devrel
```

#### Example `config.json`

```json
{
  "ClientID": "g0567b766b413b22c05c66e75d532f1b",
  "ClientSecret": "cabd0e950a7230b63c1ff45be33fb22065b382b6251a73c61177a8bb5482fcc7",
  "BaseUrl": "https://[tenant].api.identitynow.com"
}
```

</details>

<details>
<summary>Manual Configuration</summary>

Create a file named `config.json` and provide `ClientID`, `ClientSecret`, `BaseUrl`.

#### Example `config.json`

```json
{
  "ClientID": "g0567b766b413b22c05c66e75d532f1b",
  "ClientSecret": "cabd0e950a7230b63c1ff45be33fb22065b382b6251a73c61177a8bb5482fcc7",
  "BaseUrl": "https://[tenant].api.identitynow.com"
}
```

</details>

### Environment variable configuration

You can also store your configuration in environment variables.

To get your environment variables to persist across terminal sessions, add these exports to your shell profile, something like `~/.bash_profile`.

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="linux_mac" label="Linux/Mac" default>

```bash
export SAIL_BASE_URL=https://[tenant].api.identitynow.com
export SAIL_CLIENT_ID=[clientID]
export SAIL_CLIENT_SECRET=[clientSecret]
```

</TabItem>
<TabItem value="windows" label="Windows PowerShell">

```bash
$env:SAIL_BASE_URL=https://[tenant].api.identitynow.com
$env:SAIL_CLIENT_ID=[clientID]
$env:SAIL_CLIENT_SECRET=[clientSecret]
```

To get your environment variables to persist across PowerShell sessions, use these commands instead:

```powershell
[System.Environment]::SetEnvironmentVariable('SAIL_BASE_URL','https://[tenant].api.identitynow.com')
[System.Environment]::SetEnvironmentVariable('SAIL_CLIENT_ID','[clientID]')
[System.Environment]::SetEnvironmentVariable('SAIL_CLIENT_SECRET','[clientSecret]')
```

</TabItem>
</Tabs>

## Getting started with the PowerShell SDK

To get an idea of what cmdlets the SDK offers run the following command. This lists all available Get cmdlets within the SDK.

```powershell
Get-Command -Module PSSailpoint | where-object {$_.name -like "*Get-*" } | Sort-Object Name | Get-Help | Format-Table Name, Synopsis
```

The following output is returned

```powershell
Name                             Synopsis
----                             --------
Get-AccessProfile                Get an Access Profile
Get-AccessProfileEntitlements    List Access Profile's Entitlements
Get-AccessProfiles               List Access Profiles
Get-AccessRequestApprovalSummary Get the number of access-requests-approvals
Get-AccessRequestConfig          Get Access Request Configuration
Get-AccessRequestStatus          Access Request Status
Get-Account                      Account Details
Get-AccountActivities            List Account Activities
Get-AccountActivity              Get an Account Activity
Get-AccountEntitlements          Account Entitlements
Get-Accounts                     Accounts List
Get-AccountsSchema               Downloads source accounts schema template
Get-ActiveCampaigns              List Campaigns
...
```

### List Transforms

Let's say that you wanted to see all the transforms available in your tenant. You can search for the cmdlet like so.

```powershell
Get-Command -Module PSSailpoint | where-object {$_.name -like "Get-*Transform*" } | Sort-Object Name | Get-Help | Format-Table Name, Synopsis
```

The following output is returned. All beta endpoints will be designated by the Beta prefix.

```powershell
Name               Synopsis
----               --------
Get-BetaTransform  Transform by ID
Get-BetaTransforms List transforms
Get-Transform      Transform by ID
Get-Transforms     List transforms
```

To get syntax, description and parameters for a single cmdlet, run the following command.

```powershell
Get-Help Get-Transforms -Detailed
```

<details>
<summary>Cmdlet Response</summary>


```text
NAME
    Get-Transforms
    
SYNOPSIS
    List transforms
    
    
SYNTAX
    Get-Transforms [[-Offset] <Nullable`1>] [[-Limit] <Nullable`1>] [[-Count] <Nullable`1>] [[-Name] <String>] [[-Filters] <String>] [-WithHttpInfo] [<CommonParameters>]
    
    
DESCRIPTION
    Gets a list of all saved transform objects. A token with transforms-list read authority is required to call this API.
    

PARAMETERS
    -Offset <Nullable`1>
        Offset into the full result set. Usually specified with *limit* to paginate through the results. See [V3 API Standard Collection 
        Parameters](https://developer.sailpoint.com/idn/api/standard-collection-parameters) for more information.
        
    -Limit <Nullable`1>
        Max number of results to return. See [V3 API Standard Collection Parameters](https://developer.sailpoint.com/idn/api/standard-collection-parameters) for more information.
        
    -Count <Nullable`1>
        If *true* it will populate the *X-Total-Count* response header with the number of results that would be returned if *limit* and *offset* were ignored.  Since requesting a total count can have a 
        performance impact, it is recommended not to send **count=true** if that value will not be used.  See [V3 API Standard Collection 
        Parameters](https://developer.sailpoint.com/idn/api/standard-collection-parameters) for more information.
        
    -Name <String>
        Name of the transform to retrieve from the list.
        
    -Filters <String>
        Filter results using the standard syntax described in [V3 API Standard Collection Parameters](https://developer.sailpoint.com/idn/api/standard-collection-parameters#filtering-results)  Filtering is 
        supported for the following fields and operators:  **internal**: *eq*  **name**: *eq, sw*
        
    -WithHttpInfo [<SwitchParameter>]
        A switch when turned on will return a hash table of Response, StatusCode and Headers instead of just the Response
        
    <CommonParameters>
        This cmdlet supports the common parameters: Verbose, Debug,
        ErrorAction, ErrorVariable, WarningAction, WarningVariable,
        OutBuffer, PipelineVariable, and OutVariable. For more information, see
        about_CommonParameters (https://go.microsoft.com/fwlink/?LinkID=113216).
```
</details>

Running `Get-Transforms` will return a list of all transforms in your tenant.

Running `Get-Transforms -Limit 10 -Filter 'name sw Test"'` will return a list of no more than 10 transforms whose name starts with `Test`

### Paginate Results

By default, your requests will return a maximum of 250 records. To return more, you must implement pagination. To learn more about pagination, refer to [Paginating Results](/idn/api/standard-collection-parameters/#paginating-results).

Pagination is implemented with the SDK in the following code block on line 8.

```powershell showLineNumbers
$Parameters = @{
    "Filters" = 'name co "Andrew"'
}

# Accounts List
try {

    Invoke-Paginate -Function "Get-Accounts" -Increment 250 -Limit 1000 -InitialOffset 0 -Parameters $Parameters

} catch {
    Write-Host $_
    Write-Host ("Exception occurred when calling {1}: {0}" -f ($_.ErrorDetails | ConvertFrom-Json), "Get-Accounts")
    Write-Host ("Response headers: {0}" -f ($_.Exception.Response.Headers | ConvertTo-Json))
}
```


The `Invoke-Paginate` cmdlet takes a few paramters, the first is the cmdlet you wish to call.

The `-Function` specifies the name of the cmdlet you wish to call. This only works on list endpoints.

The `-Increment` specifies the number of results returned in each call to the endpoint. Defaults to 250.

The `-Limit` specifies the total number of results you can return, 1000.

The `-Parameters` specifies a hashtable of additional values passed to the API endpoint. You would use this for `filters`, `sorters` and any other query parameters.

You can also provide an `-InitialOffset` value to specify the record number to start the request on. For example, you can provide add `-InitialOffset 10` to start getting accounts from 11 instead of 0. 

To find out whether an endpoint supports pagination, refer to its documentation. Any API supporting pagination lists the optional query parameters detailed in [Paginating Results](/idn/api/standard-collection-parameters/#paginating-results).

### Search

The PowerShell SDK provides you access to IdentityNow's [Search](https://documentation.sailpoint.com/saas/help/search/index.html) functionality.

Here is an example search you can copy into your PowerShell instance to try it out:

```PowerShell
$Json = @"
{
	"indices": [
		"identities"
	],
	"query": {
		"query": "\"john.doe\"",
		"fields": [
		"name"
		]
	}
	}
"@

$Search = ConvertFrom-JsonToSearch -Json $Json

try {
    Search-Post -Search $Search
} catch {
    Write-Host ("Exception occurred when calling Search-Post: {0}" -f ($_.ErrorDetails | ConvertFrom-Json))
    Write-Host ("Response headers: {0}" -f ($_.Exception.Response.Headers | ConvertTo-Json))
}
```

This example request uses the [Perform Search endpoint](/idn/api/v3/search-post) to search your tenant for identities with the name "john.doe".

### Paginate search results

You can paginate your search results to get records past the default limit of 10000. With pagination, you can get as many records as you want.

Use the syntax shown in this example to paginate your search results:

```powershell
$JSON = @"
{
	"indices": [
		"identities"
	],
	"query": {
		"query": "*",
		"fields": [
		"name"
		]
	},
	"sort": [
		"-displayName"
	]
	}
"@

$Search = ConvertFrom-JsonToSearch -Json $JSON

try {

    Invoke-PaginateSearch -Increment 5000 -Limit 150000 -Search $Search

} catch {
    Write-Host $_
    Write-Host ("Exception occurred when calling {1}: {0}" -f ($_.ErrorDetails | ConvertFrom-Json), "Paginate-Search")
    Write-Host ("Response headers: {0}" -f ($_.Exception.Response.Headers | ConvertTo-Json))
}
```

This example searches your IdentityNow tenant for all identities and sorts them by their `displayName` in descending order. The search returns a maximum of 150000 records, the `Limit`, and 5000 records per page, the `Increment`.

To paginate the search results, you can specify these parameters: -`Increment`: The number of records to return per page. -`Limit`: The maximum number of records to return per request. The default is 10000. -`Offset`: The number of the first record to return with the request. The default is 0.

### Retries

The SDK supports retry logic in the case of an unexpected error. The two configuration options you have available are as follows:

* MaximumRetryCount - How many times to retry the request. Default is 10 retries.
* RetryIntervalSeconds - How many seconds to wait between retries. Default is 5 seconds.

The following code will tell the SDK to retry 2 times after an unexpected error. It will wait 3 seconds in between retries.

```powershell
Set-DefaultConfiguration -MaximumRetryCount 2 -RetryIntervalSeconds 3
```

## Discuss

You can use this SDK to build new tools that extend your IDN platform and improve experiences across your organization. Use this guide to get started, and if you have questions, don't hesitate to reach out on the SailPoint Developer Community forum at https://developer.sailpoint.com/discuss! 